{"ast":null,"code":"var _jsxFileName = \"/Users/sandornegyeliczky/Desktop/projektek/ScrumTrackerFrontend/frontend/src/components/projectPage/ScrumTable.js\";\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport Column from \"./Column\";\n\nconst ScrumTable = ({\n  table\n}) => {\n  const [statuses, setStatuses] = useState(table.statuses);\n  const [loading, setLoading] = useState(false); //dragNDrop\n\n  const [DragItemColumnId, setDragItemColumnId] = useState();\n  const dragItem = useRef(); //dragged task id and status id where it come from\n\n  const onDragEnter = newStatusId => {\n    setDragItemColumnId(newStatusId);\n  };\n\n  const onDragEnd = () => {\n    setLoading(true);\n    setStatuses(refreshStatus(DragItemColumnId));\n    console.log(statuses);\n    setLoading(false);\n  };\n\n  const refreshStatus = newStatusId => {\n    let newStatuses = statuses;\n\n    for (let status of newStatuses) {\n      if (status.id === dragItem.current.statusId) {\n        let taskArr = [];\n\n        for (let task of status.tasks) {\n          if (task.id === dragItem.current.taskId) {\n            continue;\n          }\n\n          taskArr.push(task);\n        }\n\n        status.tasks = taskArr;\n      }\n\n      if (newStatusId === status.id) {\n        status.tasks.push(dragItem.current.taskObject);\n      }\n    }\n\n    return newStatuses;\n  }; //\n\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"scrumTable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 22\n    }\n  }, \"Loading..\") : statuses.map(status => {\n    return /*#__PURE__*/React.createElement(Column, {\n      onDragEnd: onDragEnd,\n      dragItem: dragItem,\n      key: status.id,\n      status: status,\n      onDragEnter: onDragEnter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 24\n      }\n    });\n  }));\n};\n\nexport default ScrumTable;","map":{"version":3,"sources":["/Users/sandornegyeliczky/Desktop/projektek/ScrumTrackerFrontend/frontend/src/components/projectPage/ScrumTable.js"],"names":["React","useState","useContext","useEffect","useRef","Column","ScrumTable","table","statuses","setStatuses","loading","setLoading","DragItemColumnId","setDragItemColumnId","dragItem","onDragEnter","newStatusId","onDragEnd","refreshStatus","console","log","newStatuses","status","id","current","statusId","taskArr","task","tasks","taskId","push","taskObject","map"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,EAAqCC,SAArC,EAAgDC,MAAhD,QAA6D,OAA7D;AACA,OAAOC,MAAP,MAAmB,UAAnB;;AAEA,MAAMC,UAAU,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAa;AAE5B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAACM,KAAK,CAACC,QAAP,CAAxC;AACA,QAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,KAAD,CAAtC,CAH4B,CAK5B;;AAGA,QAAM,CAACW,gBAAD,EAAkBC,mBAAlB,IAAyCZ,QAAQ,EAAvD;AACA,QAAMa,QAAQ,GAAGV,MAAM,EAAvB,CAT4B,CASD;;AAE3B,QAAMW,WAAW,GAAIC,WAAD,IAAiB;AACjCH,IAAAA,mBAAmB,CAACG,WAAD,CAAnB;AACH,GAFD;;AAIA,QAAMC,SAAS,GAAG,MAAK;AACnBN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,IAAAA,WAAW,CAACS,aAAa,CAACN,gBAAD,CAAd,CAAX;AACAO,IAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAZ;AACAG,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GALD;;AAQA,QAAMO,aAAa,GAAIF,WAAD,IAAiB;AACnC,QAAIK,WAAW,GAAGb,QAAlB;;AACA,SAAK,IAAIc,MAAT,IAAmBD,WAAnB,EAAgC;AAC5B,UAAIC,MAAM,CAACC,EAAP,KAAcT,QAAQ,CAACU,OAAT,CAAiBC,QAAnC,EAA6C;AACzC,YAAIC,OAAO,GAAG,EAAd;;AACA,aAAK,IAAIC,IAAT,IAAiBL,MAAM,CAACM,KAAxB,EAA+B;AAC3B,cAAID,IAAI,CAACJ,EAAL,KAAYT,QAAQ,CAACU,OAAT,CAAiBK,MAAjC,EAAyC;AACrC;AACH;;AACDH,UAAAA,OAAO,CAACI,IAAR,CAAaH,IAAb;AACH;;AACDL,QAAAA,MAAM,CAACM,KAAP,GAAeF,OAAf;AACH;;AACD,UAAIV,WAAW,KAAKM,MAAM,CAACC,EAA3B,EAA+B;AAC3BD,QAAAA,MAAM,CAACM,KAAP,CAAaE,IAAb,CAAkBhB,QAAQ,CAACU,OAAT,CAAiBO,UAAnC;AACH;AAEJ;;AACD,WAAOV,WAAP;AACH,GAnBD,CAvB4B,CA4C5B;;;AAEA,sBACI;AAAK,IAAA,SAAS,EAAE,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKX,OAAO,gBAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAD,GAAoBF,QAAQ,CAACwB,GAAT,CAAaV,MAAM,IAAI;AAC/C,wBAAO,oBAAC,MAAD;AACH,MAAA,SAAS,EAAGL,SADT;AAEH,MAAA,QAAQ,EAAEH,QAFP;AAGH,MAAA,GAAG,EAAEQ,MAAM,CAACC,EAHT;AAIH,MAAA,MAAM,EAAED,MAJL;AAKH,MAAA,WAAW,EAAEP,WALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AAQH,GAT2B,CADhC,CADJ;AAcH,CA5DD;;AA8DA,eAAeT,UAAf","sourcesContent":["import React, {useState, useContext, useEffect, useRef} from 'react';\nimport Column from \"./Column\";\n\nconst ScrumTable = ({table}) => {\n\n    const [statuses, setStatuses] = useState(table.statuses);\n    const [loading, setLoading] = useState(false);\n\n    //dragNDrop\n\n\n    const [DragItemColumnId,setDragItemColumnId] = useState();\n    const dragItem = useRef(); //dragged task id and status id where it come from\n\n    const onDragEnter = (newStatusId) => {\n        setDragItemColumnId(newStatusId);\n    };\n\n    const onDragEnd = () =>{\n        setLoading(true);\n        setStatuses(refreshStatus(DragItemColumnId));\n        console.log(statuses);\n        setLoading(false);\n    };\n\n\n    const refreshStatus = (newStatusId) => {\n        let newStatuses = statuses;\n        for (let status of newStatuses) {\n            if (status.id === dragItem.current.statusId) {\n                let taskArr = [];\n                for (let task of status.tasks) {\n                    if (task.id === dragItem.current.taskId) {\n                        continue;\n                    }\n                    taskArr.push(task);\n                }\n                status.tasks = taskArr\n            }\n            if (newStatusId === status.id) {\n                status.tasks.push(dragItem.current.taskObject)\n            }\n\n        }\n        return newStatuses;\n    };\n\n    //\n\n    return (\n        <div className={\"scrumTable\"}>\n            {loading?<h1>Loading..</h1>:statuses.map(status => {\n                return <Column\n                    onDragEnd ={onDragEnd}\n                    dragItem={dragItem}\n                    key={status.id}\n                    status={status}\n                    onDragEnter={onDragEnter}\n                />\n\n            })}\n        </div>\n    );\n};\n\nexport default ScrumTable;"]},"metadata":{},"sourceType":"module"}